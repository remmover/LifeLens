1d0
< import asyncio
3a3
> from sqlalchemy import engine_from_config
5,6d4
< from sqlalchemy.engine import Connection
< from sqlalchemy.ext.asyncio import async_engine_from_config
10c8
< from src.conf.config import config as app_config
---
> 
11a10,11
> from src.database.db import SQLALCHEMY_DATABASE_URL
> 
25a26
> # target_metadata = None
27c28
< config.set_main_option("sqlalchemy.url", app_config.sqlalchemy_database_url)
---
> 
32c33
< 
---
> config.set_main_option("sqlalchemy.url", SQLALCHEMY_DATABASE_URL)
58,63c59,60
< def do_run_migrations(connection: Connection) -> None:
<     context.configure(connection=connection, target_metadata=target_metadata)
< 
<     with context.begin_transaction():
<         context.run_migrations()
< 
---
> def run_migrations_online() -> None:
>     """Run migrations in 'online' mode.
65,66c62
< async def run_async_migrations() -> None:
<     """In this scenario we need to create an Engine
---
>     In this scenario we need to create an Engine
70,71c66
< 
<     connectable = async_engine_from_config(
---
>     connectable = engine_from_config(
77,84c72,75
<     async with connectable.connect() as connection:
<         await connection.run_sync(do_run_migrations)
< 
<     await connectable.dispose()
< 
< 
< def run_migrations_online() -> None:
<     """Run migrations in 'online' mode."""
---
>     with connectable.connect() as connection:
>         context.configure(
>             connection=connection, target_metadata=target_metadata
>         )
86c77,78
<     asyncio.run(run_async_migrations())
---
>         with context.begin_transaction():
>             context.run_migrations()
92c84
<     run_migrations_online()
\ Наприкінці файла немає нового рядка
---
>     run_migrations_online()
