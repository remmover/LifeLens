#!/bin/sh

SCRIPT_NAME=$(/usr/bin/basename $0)
SCRIPT_DIR=$(/usr/bin/realpath -q $0)
DB_DUMP_FILE=${SCRIPT_DIR%/*}
DB_DUMP_FILE=${DB_DUMP_FILE##*/}

echo "SCRIPT_NAME=$SCRIPT_NAME
SCRIPT_DIR=$SCRIPT_DIR
DB_DUMP_FILE=$DB_DUMP_FILE"

. ./.env

echo "POSTGRES_HOST=$POSTGRES_HOST
POSTGRES_PORT=$POSTGRES_PORT
POSTGRES_USER=$POSTGRES_USER
POSTGRES_PASSWORD=$POSTGRES_PASSWORD"

pg_dump -H $POSTGRES_HOST -P $POSTGRES_PORT -U $POSTGRES_USER -P $POSTGRES_PORT $POSTGRES_DB > $DB_DUMP_FILE
